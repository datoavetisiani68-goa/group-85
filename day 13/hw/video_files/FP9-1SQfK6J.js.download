;/*FB_PKG_DELIM*/

__d("ProfileCometComposerRootQuery$Parameters",["CometUnifiedVideoCreation_showPrivacyMerge.relayprovider","ProfileCometComposerRootQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("ProfileCometComposerRootQuery_facebookRelayOperation"),metadata:{},name:"ProfileCometComposerRootQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__CometUnifiedVideoCreation_showPrivacyMergerelayprovider:n("CometUnifiedVideoCreation_showPrivacyMerge.relayprovider")}}};a.exports=e}),null);
__d("ProfileCometComposerDialog.entrypoint",["JSResourceForInteraction","ProfileCometComposerRootQuery$Parameters","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.profileID;return{queries:{composerQueryReference:{options:{fetchPolicy:"store-or-network"},parameters:r("ProfileCometComposerRootQuery$Parameters"),variables:{privacySelectorRenderLocation:"COMET_COMPOSER",profile_id:e,scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("ProfileCometComposerDialog.react").__setRef("ProfileCometComposerDialog.entrypoint")};l.default=e}),98);
__d("ProfileCometComposerDialogDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("ProfileCometComposerDialog.react").__setRef("ProfileCometComposerDialogDeferred"),s=e;l.default=s}),98);
__d("useProfileCometComposerDialog",["cr:1963","react-compiler-runtime","useCometComposerEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,a=o("react-compiler-runtime").c(3),i=(t=e.composerType)!=null?t:"profile",l;return a[0]!==e||a[1]!==i?(l=babelHelpers.extends({},e,{composerDialogEntryPoint:n("cr:1963"),composerType:i}),a[0]=e,a[1]=i,a[2]=l):l=a[2],r("useCometComposerEntryPointDialog")(l)}l.default=e}),98);
__d("useProfileCometComposerTrigger",["CometComposerAttachmentPluginTypes","CometComposerDraftingUtils","CometComposerFooterAttachmentPluginTypes","CometUnifiedVideoAndReelsGating","FBLogger","JSResourceForInteraction","ProfileCometContext","ProfileCometLifeEventsComposerState","QPLUserFlow","cometComposerLexicalCreateEditor","getComposerUnsavedChangesAlert","getComposerViewStateWithAdditionalMedia","gkx","qpl","react","useCometInteractionTracing","useComposerTerminalEventLog","useOnBeforeUnload","usePostInProgress","useProfileCometComposerDialog","useResumableComposerViewState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useEffect,m=s.useRef,p=r("JSResourceForInteraction")("ProfileCometComposerDialog.react").__setRef("useProfileCometComposerTrigger");function _(e,t,n,a,i){var l=m(!1),s=m([]),_=r("useResumableComposerViewState")(),f=_.clearResumableViewState,g=_.getResumableViewState,h=_.saveResumableViewState,y=r("usePostInProgress")(),C=y.postPlainText,b=y.updatePostPlainText,v=c(r("ProfileCometContext")),S=v.viewerID,R=S===e,L=m(null);d(function(){var t=!0;return R&&L.current==null&&o("CometComposerDraftingUtils").canFriendsAndFamilyUsersDraftPostsSilentExposure()&&o("CometComposerDraftingUtils").shouldShowDraftsInline()&&o("CometComposerDraftingUtils").getDraftFromIndexedDB(e,"post_draft").then(function(e){if(t&&e!=null){var n=e==null?void 0:e.draftedPostText;n!=null&&n!==""&&b(e),L.current=e}}).catch(function(e){return o("CometComposerDraftingUtils").logDraftRetrievalError(e)}),function(){t=!1}},[]);var E=m(!1),k=m(!1);r("useOnBeforeUnload")(function(){if(s.current!=null&&s.current.forEach(function(e){return e()}),E.current===!0&&(!R||!o("CometComposerDraftingUtils").canFriendsAndFamilyUsersDraftPostsSilentExposure()))return r("getComposerUnsavedChangesAlert")(g())}),r("useComposerTerminalEventLog")(function(){return E.current},function(){return g().creationSessionID});var I=u(function(e){if(l.current===!0||k.current===!0||!o("CometComposerDraftingUtils").shouldShowDraftsInline())E.current=!1,f(),b(g());else{var t;E.current=(t=e==null?void 0:e.isDirty)!=null?t:!1,h(e),b(g())}},[f,g,h,b]),T=function(t,n){l.current=!1,n!=null&&(s.current=[].concat(s.current,[n]))},D=function(){E.current=!0,l.current=!1},x=function(){l.current=!0},$=function(){k.current=!0,L.current=null,o("CometComposerDraftingUtils").deleteDraftFromIndexedDB(e,"post_draft").catch(function(e){r("FBLogger")("comet_composer").mustfix("Experienced error when trying to delete draft: "+e)})},P=function(){k.current=!1,L.current=null},N=r("useProfileCometComposerDialog")({composerEntryPointName:"inline_composer",composerSourceSurface:"timeline",localBackupTargetID:e,onBeforeClose:I,onDeleteDraft:$,onSave:T,onSaveDraft:P,onSaveError:D,onSubmit:x,profileID:e,title:t,tracePolicy:"comet.composer.profile"}),M=N[0],w=N[1],A=N[2],F=N[3],O=N[4],B=r("useCometInteractionTracing")(r("qpl")._(30605360,"8900"),"responsive","INTERACTION"),W=u(function(t){E.current=!1,o("CometComposerDraftingUtils").canFriendsAndFamilyUsersDraftPostsSilentExposure()&&R?L.current!=null?q(t,L.current):o("CometComposerDraftingUtils").getDraftFromIndexedDB(e,"post_draft").then(function(e){e?q(t,e):U(t)}).catch(function(e){o("CometComposerDraftingUtils").logDraftRetrievalError(e),U(t)}):U(t)},[]);return[W,w,A,F,O,C];function q(e,t){var n=t==null?void 0:t.serializedLexicalEditorState;if(t!=null&&n!=null){var a=r("cometComposerLexicalCreateEditor")();a.setEditorState(a.parseEditorState(n));var i=babelHelpers.extends({},t,{lexicalEditor:a}),l=t==null?void 0:t.mediaAttachments,s=l==null?void 0:l.some(function(e){return(e==null?void 0:e.fileType)==="VIDEO"});if(l!=null&&s===!0){var u=o("CometComposerDraftingUtils").createNewObjectURLsForVideosAndThumbnails(l);u!=null&&(i=babelHelpers.extends({},i,{mediaAttachments:u}))}U(e,i)}else U(e)}function U(t,l){var s=r("gkx")("20836"),u=r("getComposerViewStateWithAdditionalMedia")({draftViewState:l,entryPointData:t,getResumableViewState:g,startWithHeaderTextStyle:s});if(i!=null&&(u=babelHelpers.extends({},u,i)),u=babelHelpers.extends({},u,{videoComposerData:{shouldOpenVideoSpecificComposer:n,targetID:e,wasCreatedViaUnifiedVideoFlow:o("CometUnifiedVideoAndReelsGating").shouldShowUnifiedVideoEditor()}}),(t==null?void 0:t.pushedPageOnLoad)==="get_messages")u=babelHelpers.extends({},u,{attachmentArea:babelHelpers.extends({},u.attachmentArea,{activeAttachmentType:r("CometComposerAttachmentPluginTypes").GET_MESSAGES}),isGetMessagesPost:!0,isGetMessagesPostAttachmentOptional:!0});else if((t==null?void 0:t.pushedPageOnLoad)==="get_whatsapp_messages")u=babelHelpers.extends({},u,{footerAttachmentArea:{activeFooterAttachmentType:o("CometComposerFooterAttachmentPluginTypes").CometComposerFooterAttachmentPluginTypes.GET_WHATSAPP_MESSAGES},isGetWhatsAppMessagePost:!0,isGetWhatsappMessagesPostAttachmentOptional:a});else if((t==null?void 0:t.pushedPageOnLoad)==="mle"){var c,d;u=babelHelpers.extends({},u,{majorLifeEvent:babelHelpers.extends({},(c=u.majorLifeEvent)!=null?c:o("ProfileCometLifeEventsComposerState").getInitialState(),{isFromMegaMenu:(d=t==null?void 0:t.isFromMegaMenu)!=null?d:!1})})}var m=p.getModuleIfRequireable()!=null;r("QPLUserFlow").start(r("qpl")._(316544852,"610"),{annotations:{bool:{revisit:m}}}),B(function(e){e.onComplete(function(t){m&&e.addMetadata("revisit",1)}),M({beginningViewState:u,pushedPageOnLoad:t==null?void 0:t.pushedPageOnLoad})})}}l.default=_}),98);
__d("useProfileCometInlineComposer",["fbt","CometRouteParams","react","react-compiler-runtime","useProfileCometComposerTrigger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.startTransition,d=u.useEffect,m=u.useRef;function p(e){var t=o("react-compiler-runtime").c(12),n=e.beginningViewState,a=e.isGetWhatsAppMessagesPostAttachmentOptional,i=e.profileID,l=e.shouldOpenVideoSpecificComposer,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=s._(/*BTDS*/"\u10de\u10dd\u10e1\u10e2\u10d8\u10e1 \u10e8\u10d4\u10e5\u10db\u10dc\u10d0"),t[0]=u):u=t[0];var p=u,_=r("useProfileCometComposerTrigger")(i,p,l,a,n),f=_[0],g=_[1],h=_[2],y=_[3],C=_[4],b=_[5],v=o("CometRouteParams").useRouteParams(),S=m(null),R=String(v==null?void 0:v.modal),L;t[1]!==f||t[2]!==R||t[3]!==i?(L=function(){S.current!==i&&(R!=="null"&&(S.current=i),R==="composer"?c(function(){return f()}):R==="composer_whatsapp_message"?c(function(){return f({pushedPageOnLoad:"get_whatsapp_messages"})}):R==="composer_message"?c(function(){return f({pushedPageOnLoad:"get_messages"})}):R==="marketplace_jobs"&&c(function(){return f({pushedPageOnLoad:"marketplace_jobs"})}))},t[1]=f,t[2]=R,t[3]=i,t[4]=L):L=t[4],d(L,void 0);var E;return t[5]!==f||t[6]!==h||t[7]!==y||t[8]!==C||t[9]!==b||t[10]!==g?(E=[f,g,h,y,C,b],t[5]=f,t[6]=h,t[7]=y,t[8]=C,t[9]=b,t[10]=g,t[11]=E):E=t[11],E}l.default=p}),226);